var items=new Array("works_type","works_counts","works_orgname","works_tag","works_color","works_owner","works_start","works_end","works_url","works_remark","works_status","works_property");
function init(){addNew();initNoteCalender({type:"note",daydatalist:"6,13,14,15,22,26|4,7,21,24,26|1,11,17,22,24,25,28,31|1,6,8,11,14,16,23|5,10,24|25|5,6,31",datestr:"yyyyMMdd",begin:"2010,1",format:"yyyyMMdd"});
}function addNew(){var a={objectName:"Works",action:"getNew"};tek.macEdit.getEdit(tek.common.getRootPath()+"servlet/tobject",a,items,"works_form");tek.macEdit.initialDefaultButton("works_btn");
$("#submitBtn").attr("type","button").click(function(b){submitAdd();return false;});}tek.macEdit.customOperation=function(c,a,b){tek.macEdit.defaultOperation(c,a,b);
$("#works_btn button[type='reset']").click(function(){resetForm();});getTags();getColors();};tek.macEdit.appendCustomEditField=function(d,a){var c="";if(!tek.type.isObject(d)||tek.type.isEmpty(d.name)){return c;
}var b=d.name;if(b==="works_color"){c+="<div id='"+b+"-form-group' class='form-group'>"+tek.macEdit.appendNameField(d)+"<div class='col-xs-9'>";c+='<input type="text" class="form-control dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" name="'+b+'" id="'+b+'" placeholder="人生色彩"><ul class="dropdown-menu" id="works-common-color-ul"  aria-labelledby="'+b+'"></ul>';
c+="</div></div>";}else{if(b==="works_tag"){c+="<div id='"+b+"-form-group' class='form-group'>"+tek.macEdit.appendNameField(d)+"<div class='col-xs-9'>";
c+='<div id="works_tag" class="col-md-12" style="overflow:hidden"><ul id="works-common-tags-ul" class="col-md-12 radio-checkbox-ul"></ul></div>';c+="</div></div>";
}else{if(b==="works_type"){c+="<div id='"+b+"-form-group' class='form-group'>"+tek.macEdit.appendNameField(d)+"<div class='col-xs-3'><select class='form-control works-first-select' onchange=changeWorksType(this.value,'"+b+"')>";
c+=tek.macEdit.appendSelectField(d,"<");c+="</div><div class='col-xs-6'><select id='"+b+"' name='"+b+"' class='form-control works-select'>";c+=tek.macEdit.appendSelectField(d,">")+"<input class='form-control hide works-input' id='works_name' name='works_name' type='text' placeholder='请输入自定义类型名称...' value='' />";
c+="</div></div>";}else{c=tek.macEdit.appendDefaultEditField(d,a);}}}return c;};function selectedColor(a,b){$("#works_color").val(html);}function submitAdd(){var a=tek.common.getSerializeObjectParameters("works_form");
a.objectName="Works";a.action="addInfo";var b=a.works_type;if(b<parseInt(4096)){a.works_name=$("#works_type").find("option:selected").text();}tek.macEdit.editInfo(tek.common.getRootPath()+"servlet/tobject",a);
}function resetForm(){var c=items.length;var b="";var a="";for(i=0;i<c;i++){a=$("#"+items[i]);b=a.attr("type");if(b==="text"){a.val("");}}}tek.macEdit.appendSelectField=function(h,b){var f="";
if(!h||!h.name){return f;}var c=h.name;var g=h.value;var e=h.selects;var a=h.shows;if(!e||e.length<=0||!a||a.length<=0||e.length!=a.length){return f;}for(var d=0;
d<e.length;d++){if(!e[d]||e[d].length<=0||!a[d]||a[d].length<=0){continue;}if(b=="<"&&e[d]<parseInt(4096)){continue;}else{if(b==">"&&e[d]>=parseInt(4096)){continue;
}}f+="<option value='"+e[d]+"' class='form-control'"+(((d==0&&tek.type.isEmpty(g))||e[d]==g)?" selected='selected'":"")+">"+a[d]+"</option>";}f+="</select>";
return f;};function changeWorksType(b,a){if(!b){return;}if(b!=parseInt(4096)){$(".works-input").removeClass("hide");$(".works-select").addClass("hide");
$(".works-select").removeAttr("id");$(".works-select").removeAttr("name");$(".works-first-select").attr({id:a,name:a});}else{$(".works-select").removeClass("hide");
$(".works-select").attr({id:a,name:a});$(".works-input").addClass("hide");$(".works-first-select").removeAttr("id","name");}}